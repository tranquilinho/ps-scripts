#!/usr/bin/env bash

readonly service_cfg=${0%/scripts*}/etc/service.cfg

. ${service_cfg} && . ${scripts_base}/common

readonly pkg_name=gcc
readonly pkg_version=4.9.3
readonly url_base=https://ftp.gnu.org/gnu/gcc/gcc-${pkg_version}

build_preconditions
#cd ${pkg_name}-${pkg_version}
#readonly prefix=${usr_prefix}/${pkg_name}-${pkg_version}

#install_prereq zlib "mandatory"
# export PATH=${usr_prefix}/pkg-config/bin:${PATH}

if [ -f gmp-4.3.2.tar.bz2 -a -f isl-0.12.2.tar.bz2 -a -f mpfr-2.4.2.tar.bz2 -a -f  mpc-0.8.1.tar.gz -a -f cloog-0.18.1.tar.gz ]; then
    log "${ok} All prerequisites already downloaded"
else
    ./contrib/download_prerequisites | logalize $(configure_log)
fi
[ ! -d objdir ] && mkdir objdir
cd objdir
../configure --prefix=${prefix} --enable-languages=c,c++,fortran  | logalize $(configure_log)

standard_install

# cd ..