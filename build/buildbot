#!/bin/bash

readonly service_cfg=${0%/scripts*}/etc/service.cfg

. ${service_cfg} && . ${scripts_base}/common


readonly pkg_name=buildbot
readonly pkg_version=
readonly url_base=
# readonly hasher=md5sum
# readonly expected_hash=eaa72bff5341c05169b76ce3dcbb8140
[ -z "${python}" ] && readonly python=$(which python)

${python} -c "import sys; print (sys.version)" | logalize ${build_log}

if ${python} -c "import ${pkg_name}" ; then
    log "${info} ${pkg_name} already available in ${python}"
else
    # by now, use pip
    debian_install python-pip
    debian_install python-dev
    pip install buildbot | logalize ${build_log}
    # required for manhole
    pip install pycrypto pyasn1 | logalize ${build_log}
    pip install buildbot-slave | logalize ${build_log}
    log_status $? "${pkg_name} installed in ${python}" "Problem installing ${pkg_name} in ${python}"
fi

